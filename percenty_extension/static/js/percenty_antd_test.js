(()=>{"use strict";var _={},E={};function T(R){var e=E[R];if(void 0!==e)return e.exports;var A=E[R]={exports:{}};return _[R](A,A.exports,T),A.exports}T.nc=void 0,T.rv=function(){return"1.0.0-beta.3"},T.ruid="bundler=rspack@1.0.0-beta.3",T.nc="CSP_NONCE_PLACEHOLDER",(()=>{var _;async function E(_){return new Promise((E,T)=>{try{chrome.storage.sync.get(_,T=>{E(null==T?void 0:T[_])})}catch(_){console.error(_),T(_)}})}async function T(_,E){return new Promise((T,R)=>{try{chrome.storage.sync.set({[_]:E},()=>T())}catch(_){console.error(_),R(_)}})}async function R(_){return new Promise((E,T)=>{try{chrome.storage.local.remove(_,()=>E())}catch(_){console.error(_),T(_)}})}async function e(_){return new Promise((E,T)=>{try{chrome.storage.sync.remove(_,()=>E())}catch(_){console.error(_),T(_)}})}async function A(_,E){return new Promise((T,R)=>{try{chrome.storage.session.set({[_]:E},()=>T())}catch(_){console.error(_),R(_)}})}async function S(_){return new Promise((E,T)=>{try{chrome.storage.session.get(_,T=>{E(null==T?void 0:T[_])})}catch(_){console.error(_),T(_)}})}async function O(_,E){var T;let R=await chrome.cookies.get({url:_,name:E});return null!==(T=null==R?void 0:R.value)&&void 0!==T?T:""}async function N(){return new Promise((_,E)=>{chrome.storage.sync.getBytesInUse(E=>{_(E)})})}async function r(){return new Promise((_,E)=>{try{chrome.storage.sync.clear(()=>_())}catch(_){console.error(_),E(_)}})}async function n(){return new Promise((_,E)=>{try{chrome.storage.local.clear(()=>_())}catch(_){console.error(_),E(_)}})}let t={getLocalStorage:async function _(_){return new Promise((E,T)=>{try{chrome.storage.local.get(_,T=>{E(null==T?void 0:T[_])})}catch(_){console.error(_),T(_)}})},setLocalStorage:async function _(_,E){return new Promise((T,R)=>{try{chrome.storage.local.set({[_]:E},()=>T())}catch(_){console.error(_),R(_)}})}},o={startIntervalAsync:function(_,E){let T=[],R=0,e=async()=>{try{await _(++R)?T.push(setTimeout(e,E)):T.forEach(_=>clearTimeout(_))}catch(_){T.forEach(_=>clearTimeout(_)),console.error(_)}};e()}},C="PENDING_MESSAGE_KEY";async function c(_){var E;let T=null!==(E=await t.getLocalStorage(C))&&void 0!==E?E:[],R=Date.now(),e=T.filter(_=>_.expirationAt>=R);e.push({..._}),await t.setLocalStorage(C,e)}async function s(_){var E;return(null!==(E=await t.getLocalStorage(C))&&void 0!==E?E:[]).find(E=>(null==E?void 0:E.receiverName)===_)}async function P(_){return new Promise((E,T)=>{chrome.runtime.sendMessage(_,_=>{E(_)})})}async function I(_){return new Promise((E,T)=>{chrome.tabs.sendMessage(_.targetTabId,_,_=>{chrome.runtime.lastError?E("CONNECTION_ERROR"):E(_)})})}async function L(_,E){return new Promise((T,R)=>{o.startIntervalAsync(async R=>{let e=await I(_);return"CONNECTION_ERROR"===e&&!!(R<=E)||("CONNECTION_ERROR"===e&&R>E?T("CONNECTION_ERROR"):T(e),!1)},1e3)})}let a={sendRuntimeMessage:function(_,E){chrome.runtime.sendMessage(_,_=>{null==E||E(null!=_?_:void 0)})},addMessageListener:function(_){chrome.runtime.onMessage.addListener((E,T,R)=>_(E,T,R))}};function i(_,E,T){return E in _?Object.defineProperty(_,E,{value:T,enumerable:!0,configurable:!0,writable:!0}):_[E]=T,_}class M{constructor(_){i(this,"type",void 0),this.type=_}}!function(_){_.POST_SLACK_ERROR_WEBHOOK="POST_SLACK_ERROR_WEBHOOK",_.TO_OFFSCREEN_DEFAULT_INJECT_DATA="TO_OFFSCREEN_DEFAULT_INJECT_DATA",_.TO_OFFSCREEN_TAOBAO_SCRAP="TO_OFFSCREEN_TAOBAO_SCRAP",_.TO_OFFSCREEN_TMALL_SCRAP="TO_OFFSCREEN_TMALL_SCRAP",_.TO_OFFSCREEN_GET_IDLE_TIME="TO_OFFSCREEN_GET_IDLE_TIME",_.TO_OFFSCREEN_GET_NAVER_SHOPPING_KEYWORD="TO_OFFSCREEN_GET_NAVER_SHOPPING_KEYWORD",_.TO_BACKGROUND_ENSURE_OFFSCREEN="TO_BACKGROUND_ENSURE_OFFSCREEN",_.TO_CONTENT_SCRAP_AUTO_BY_URL="TO_CONTENT_SCRAP_AUTO_BY_URL",_.TO_BACKGROUND_SET_1688_QUERY="TO_BACKGROUND_SET_1688_QUERY",_.GET_PERCENTY_TOKEN="GET_PERCENTY_TOKEN",_.INJECT_RESULT="INJECT_RESULT",_.OPEN_TAB_AND_SCRAP="OPEN_TAB_AND_SCRAP",_.OPEN_TAB_AND_SCRAP_FINISH="OPEN_TAB_AND_SCRAP_FINISH",_.SCRAP_AUTO="SCRAP_AUTO",_.SCRAP_AUTO_FINISH="SCRAP_AUTO_FINISH",_.SCRAP_AUTO_FINISH_TO_LIST_PAGE="SCRAP_AUTO_FINISH_TO_LIST_PAGE",_.OPEN_PERCENTY_TAB="OPEN_PERCENTY_TAB",_.GET_CURRENT_TAB_ID_FROM_CONTENTS_SCRIPT="GET_CURRENT_TAB_ID_FROM_CONTENTS_SCRIPT",_.CLOSE_TAB="CLOSE_TAB",_.SCRAP_SUCCESS_TO_PERCENTY_WEB="SCRAP_SUCCESS_TO_PERCENTY_WEB",_.SCRAP_SUCCESS_TO_PERCENTY_WEB_TAB="SCRAP_SUCCESS_TO_PERCENTY_WEB_TAB",_.EXTENSION_INSTALLED_TO_PERCENTY_WEB_TAB="EXTENSION_INSTALLED_TO_PERCENTY_WEB_TAB",_.FETCH_RAW="FETCH_RAW",_.GET_NAVER_SHOPPING_LENS="GET_NAVER_SHOPPING_LENS",_.IMG_SEARCH="IMG_SEARCH",_.IMG_SEARCH_TAB="IMG_SEARCH_TAB",_.IMG_SEARCH_RESULT="IMG_SEARCH_RESULT",_.IMAGE_SEARCH_POSITION="IMAGE_SEARCH_POSITION",_.IMAGE_SEARCH_BTN_POSITION="IMAGE_SEARCH_BTN_POSITION",_.IMAGE_SEARCH_RESULT="IMAGE_SEARCH_RESULT",_.IMAGE_SEARCH_MODAL_OPEN="IMAGE_SEARCH_MODAL_OPEN",_.UPDATE_DECLARATIVE_NET_REQUEST_RULES="UPDATE_DECLARATIVE_NET_REQUEST_RULES",_.GET_SHEIN_THUMBNAIL_IMGS="GET_SHEIN_THUMBNAIL_IMGS",_.GET_IMG_BLOB_URL="GET_IMG_BLOB_URL",_.TO_DELETE_COOKIES="TO_DELETE_COOKIES",_.GET_REACT_FIBER_PRODUCT_DATA="GET_REACT_FIBER_PRODUCT_DATA",_.TO_CONTENT_SCRAP_IMAGES_BLOB_BY_URL_REQUEST="TO_CONTENT_SCRAP_IMAGES_BLOB_BY_URL_REQUEST",_.TO_CONTENT_SCRAP_IMAGES_BLOB_BY_URL_RESPONSE="TO_CONTENT_SCRAP_IMAGES_BLOB_BY_URL_RESPONSE",_.TO_CONTENT_SET_SCRAP_PARAMS="TO_CONTENT_SET_SCRAP_PARAMS",_.HEALTH_CHECK="HEALTH_CHECK",_.OPEN_SMART_STORE_LOGIN_EXTERNAL="OPEN_SMART_STORE_LOGIN_EXTERNAL",_.UPLOAD_SMART_STORE_EXTERNAL="UPLOAD_SMART_STORE_EXTERNAL",_.EDIT_SMART_STORE_EXTERNAL="EDIT_SMART_STORE_EXTERNAL",_.GET_CURRENT_LOGGED_IN_SMART_STORE_CHANNEL_EXTERNAL="GET_CURRENT_LOGGED_IN_SMART_STORE_CHANNEL_EXTERNAL",_.GET_CHROME_EXTENSION_VERSION_EXTERNAL="GET_CHROME_EXTENSION_VERSION_EXTERNAL",_.DELETE_SMART_STORE_PRODUCT_EXTERNAL="DELETE_SMART_STORE_PRODUCT_EXTERNAL",_.UPDATE_SMART_STORE_PRODUCT_STATE_EXTERNAL="UPDATE_SMART_STORE_PRODUCT_STATE_EXTERNAL",_.GET_SMART_STORE_PRODUCT_EXTERNAL="GET_SMART_STORE_PRODUCT_EXTERNAL",_.FETCH_RAW_EXTERNAL="FETCH_RAW_EXTERNAL",_.UPDATE_DECLARATIVE_NET_REQUEST_RULES_EXTERNAL="UPDATE_DECLARATIVE_NET_REQUEST_RULES_EXTERNAL",_.GET_DECLARATIVE_NET_REQUEST_RULES_EXTERNAL="GET_DECLARATIVE_NET_REQUEST_RULES_EXTERNAL",_.SCRAP_START_EXTERNAL="SCRAP_START_EXTERNAL",_.REQUEST_AI_SOURCING="REQUEST_AI_SOURCING",_.REQUEST_NAVER_SHOPPING_POPULAR_TERMS="REQUEST_NAVER_SHOPPING_POPULAR_TERMS",_.REQUEST_TAOBAO_IMG_SEARCH_EXTERNAL="REQUEST_TAOBAO_IMG_SEARCH_EXTERNAL",_.REFRESH_OFFSCREEN_DOCUMENT_IF_NEED="REFRESH_OFFSCREEN_DOCUMENT_IF_NEED",_.GET_IMAGES_FROM_URL="GET_IMAGES_FROM_URL",_.OPEN_TAB_WITH_SCRAP_PARAMS_EXTERNAL="OPEN_TAB_WITH_SCRAP_PARAMS_EXTERNAL",_.SCRAP_SUCCESS_FROM_EXT="SCRAP_SUCCESS_FROM_EXT",_.CHROME_EXTENSION_INSTALLED_FROM_EXT="CHROME_EXTENSION_INSTALLED_FROM_EXT",_.NAVER_SHOPPING_LENS_FROM_EXT="NAVER_SHOPPING_LENS_FROM_EXT",_.CLEAR_CHROME_EXTENSION_STORAGE="CLEAR_CHROME_EXTENSION_STORAGE",_.OPEN_FROM_MARKET_TAB="OPEN_FROM_MARKET_TAB",_.HIGHLIGHT_OPTION="HIGHLIGHT_OPTION",_.GET_SMARTSTORE_PRODUCT_KEYWORDS="GET_SMARTSTORE_PRODUCT_KEYWORDS",_.GET_RECOMMEND_PRODUCT_NAME="GET_RECOMMEND_PRODUCT_NAME"}(_||(_={}));console.error("".concat("percenty.antd.test:"," screen")),a.sendRuntimeMessage(new class E extends M{constructor(E,T){super(_.GET_PERCENTY_TOKEN),i(this,"percentyUrl",void 0),i(this,"tokenKey",void 0),this.percentyUrl=E,this.tokenKey=T}}(window.location.origin,"_jg_tk"),_=>{console.error("get cookie success")}),a.addMessageListener((E,T,R)=>{switch(E.type){case _.SCRAP_SUCCESS_TO_PERCENTY_WEB_TAB:window.postMessage({type:_.SCRAP_SUCCESS_FROM_EXT,percentyProductId:E.percentyProductId},window.location.href);break;case _.EXTENSION_INSTALLED_TO_PERCENTY_WEB_TAB:window.postMessage({type:_.CHROME_EXTENSION_INSTALLED_FROM_EXT},window.location.href)}return!1})})()})();