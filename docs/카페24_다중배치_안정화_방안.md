# ì¹´í˜24 ë‹¤ì¤‘ë°°ì¹˜ ì•ˆì •í™” ë°©ì•ˆ

## 1. í˜„ì¬ ìƒí™© ë¶„ì„

### âœ… ì„±ê³µì ì¸ ê°œì„ ì‚¬í•­
- ì°½ í•¸ë“¤ ì¼ê´€ì„± ìœ ì§€ (ë™ì¼í•œ ì‘ì—… ì°½ì—ì„œ ëª¨ë“  ì‘ì—… ìˆ˜í–‰)
- í˜ì´ì§€ ì´ë™ ì•ˆì •ì„± í™•ë³´ (5â†’4â†’3â†’2â†’1 ìˆœì„œ ì„±ê³µ)
- íŒì—…ì°½ ì²˜ë¦¬ í›„ ì›ë˜ ì°½ ë³µê·€ ì •í™•ì„±
- ì´ 50ê°œ ìƒí’ˆ ì—°ë™í•´ì œ ì™„ë£Œ

### ğŸŸ¡ ê°œì„  í•„ìš” ì‚¬í•­
- ë¸Œë¼ìš°ì € ì°½ í¬ì»¤ìŠ¤ë¡œ ì¸í•œ í”„ë¡¬í”„íŠ¸ ìˆ¨ê¹€ í˜„ìƒ
- ë‹¤ì¤‘ ë°°ì¹˜ ì‹¤í–‰ ì‹œ ì°½ í¬ì»¤ìŠ¤ ê²½ìŸ ê°€ëŠ¥ì„±

## 2. ë‹¤ì¤‘ ë°°ì¹˜ ê°„ì„­ ìœ„í—˜ë„ í‰ê°€

### ğŸŸ¢ ë‚®ì€ ìœ„í—˜ (í˜„ì¬ êµ¬í˜„)
- **Selenium ê¸°ë°˜ ì œì–´**: ì „ì—­ ì…ë ¥ ë„êµ¬(pyautogui, pyperclip) ë¯¸ì‚¬ìš©
- **ë…ë¦½ì  WebDriver**: ê° ë°°ì¹˜ë³„ ë³„ë„ ì¸ìŠ¤í„´ìŠ¤
- **ì°½ í•¸ë“¤ ê¸°ë°˜ ì œì–´**: ì •í™•í•œ ë¸Œë¼ìš°ì € íƒ€ê²ŸíŒ…

### ğŸŸ¡ ì¤‘ê°„ ìœ„í—˜ (ê°œì„  ê°€ëŠ¥)
- **ì°½ í¬ì»¤ìŠ¤ ë³€ê²½**: `driver.switch_to.window()` ì‹œ ë¸Œë¼ìš°ì € í™œì„±í™”
- **Alert ì²˜ë¦¬**: JavaScript Alert ì²˜ë¦¬ ì‹œ í¬ì»¤ìŠ¤ íšë“
- **í˜ì´ì§€ ë¡œë”©**: ìƒˆ í˜ì´ì§€ ë¡œë“œ ì‹œ ë¸Œë¼ìš°ì € ì „ë©´ í‘œì‹œ

## 3. ì¶”ê°€ ì•ˆì •í™” ë°©ì•ˆ

### 3.1 ë¸Œë¼ìš°ì € ì°½ í¬ì»¤ìŠ¤ ìµœì†Œí™”

#### A. ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œ ê°•í™”
```python
def _minimize_browser_focus(self):
    """ë¸Œë¼ìš°ì € ì°½ í¬ì»¤ìŠ¤ë¥¼ ìµœì†Œí™”í•˜ì—¬ ë‹¤ë¥¸ ì‘ì—… ë°©í•´ ë°©ì§€"""
    try:
        # ë¸Œë¼ìš°ì € ì°½ì„ ë°±ê·¸ë¼ìš´ë“œë¡œ ì´ë™
        self.driver.minimize_window()
        
        # í•„ìš”ì‹œì—ë§Œ ë³µì›
        if self._need_visual_interaction():
            self.driver.maximize_window()
            
    except Exception as e:
        logger.warning(f"ë¸Œë¼ìš°ì € í¬ì»¤ìŠ¤ ìµœì†Œí™” ì‹¤íŒ¨: {e}")
```

#### B. í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ ì˜µì…˜ ì¶”ê°€
```python
def _setup_headless_option(self):
    """ë‹¤ì¤‘ ë°°ì¹˜ ì‹¤í–‰ ì‹œ í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ ì˜µì…˜"""
    chrome_options = webdriver.ChromeOptions()
    
    # ë‹¤ì¤‘ ë°°ì¹˜ ê°ì§€ ì‹œ í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ í™œì„±í™”
    if self._detect_multiple_instances():
        chrome_options.add_argument('--headless')
        chrome_options.add_argument('--disable-gpu')
        logger.info("ë‹¤ì¤‘ ë°°ì¹˜ ê°ì§€ - í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ í™œì„±í™”")
    
    return chrome_options
```

### 3.2 ì°½ ê´€ë¦¬ ê°œì„ 

#### A. ì°½ ìƒíƒœ ëª¨ë‹ˆí„°ë§ ê°•í™”
```python
def _monitor_window_state(self):
    """ì°½ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ê°„ì„­ ë°©ì§€"""
    try:
        current_handles = self.driver.window_handles
        active_handle = self.driver.current_window_handle
        
        # ì˜ˆìƒì¹˜ ëª»í•œ ì°½ ë³€í™” ê°ì§€
        if len(current_handles) != self.expected_window_count:
            logger.warning(f"ì˜ˆìƒì¹˜ ëª»í•œ ì°½ ìˆ˜ ë³€í™”: {len(current_handles)}")
            self._restore_window_state()
            
        # ì‘ì—… ì°½ì´ ì•„ë‹Œ ë‹¤ë¥¸ ì°½ì´ í™œì„±í™”ëœ ê²½ìš°
        if active_handle != self.main_work_window:
            logger.info("ì‘ì—… ì°½ìœ¼ë¡œ ë³µê·€")
            self.driver.switch_to.window(self.main_work_window)
            
    except Exception as e:
        logger.error(f"ì°½ ìƒíƒœ ëª¨ë‹ˆí„°ë§ ì‹¤íŒ¨: {e}")
```

#### B. ì°½ ê²©ë¦¬ ê°•í™”
```python
def _isolate_browser_instance(self):
    """ë¸Œë¼ìš°ì € ì¸ìŠ¤í„´ìŠ¤ ê²©ë¦¬ ê°•í™”"""
    chrome_options = webdriver.ChromeOptions()
    
    # ê° ì¸ìŠ¤í„´ìŠ¤ë³„ ê³ ìœ  ì‚¬ìš©ì ë°ì´í„° ë””ë ‰í† ë¦¬
    user_data_dir = f"chrome_data_{self.instance_id}_{int(time.time())}"
    chrome_options.add_argument(f'--user-data-dir={user_data_dir}')
    
    # ì°½ í¬ì»¤ìŠ¤ ìµœì†Œí™” ì˜µì…˜
    chrome_options.add_argument('--no-first-run')
    chrome_options.add_argument('--disable-default-apps')
    chrome_options.add_argument('--disable-popup-blocking')
    
    return chrome_options
```

### 3.3 Alert ì²˜ë¦¬ ê°œì„ 

#### A. ë¹„ì¹¨ìŠµì  Alert ì²˜ë¦¬
```python
def _handle_alert_non_intrusive(self):
    """Alertì„ ë¹„ì¹¨ìŠµì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ í¬ì»¤ìŠ¤ ë³€ê²½ ìµœì†Œí™”"""
    try:
        # Alert ì¡´ì¬ í™•ì¸ (í¬ì»¤ìŠ¤ ë³€ê²½ ì—†ì´)
        alert = WebDriverWait(self.driver, 3).until(EC.alert_is_present())
        
        # í˜„ì¬ ì°½ í•¸ë“¤ ì €ì¥
        current_window = self.driver.current_window_handle
        
        # Alert ì²˜ë¦¬
        alert_text = alert.text
        logger.info(f"Alert ë‚´ìš©: {alert_text}")
        alert.accept()
        
        # ì›ë˜ ì°½ìœ¼ë¡œ í™•ì‹¤íˆ ë³µê·€
        self.driver.switch_to.window(current_window)
        
        return True
        
    except TimeoutException:
        return False
    except Exception as e:
        logger.error(f"Alert ì²˜ë¦¬ ì‹¤íŒ¨: {e}")
        return False
```

### 3.4 ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ê°ì§€ ë° ì¡°ì •

#### A. ì¸ìŠ¤í„´ìŠ¤ ê°ì§€ ì‹œìŠ¤í…œ
```python
def _detect_multiple_instances(self):
    """ë‹¤ë¥¸ ì¹´í˜24 ìë™í™” ì¸ìŠ¤í„´ìŠ¤ ê°ì§€"""
    try:
        import psutil
        
        current_process = os.getpid()
        cafe24_processes = []
        
        for proc in psutil.process_iter(['pid', 'name', 'cmdline']):
            try:
                if proc.info['name'] and 'python' in proc.info['name'].lower():
                    cmdline = ' '.join(proc.info['cmdline'] or [])
                    if 'cafe24' in cmdline.lower() and proc.info['pid'] != current_process:
                        cafe24_processes.append(proc.info['pid'])
            except (psutil.NoSuchProcess, psutil.AccessDenied):
                continue
        
        if cafe24_processes:
            logger.info(f"ë‹¤ë¥¸ ì¹´í˜24 ì¸ìŠ¤í„´ìŠ¤ ê°ì§€: {len(cafe24_processes)}ê°œ")
            return True
        
        return False
        
    except ImportError:
        logger.warning("psutil ëª¨ë“ˆ ì—†ìŒ - ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ê°ì§€ ë¶ˆê°€")
        return False
```

#### B. ì‹¤í–‰ ì§€ì—° ë° ì¡°ì •
```python
def _coordinate_multiple_instances(self):
    """ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ì‹¤í–‰ ì‹œ ì¡°ì •"""
    if self._detect_multiple_instances():
        # ëœë¤ ì§€ì—°ìœ¼ë¡œ ë™ì‹œ ì‹¤í–‰ ë°©ì§€
        delay = random.uniform(5, 15)
        logger.info(f"ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ì¡°ì • - {delay:.1f}ì´ˆ ëŒ€ê¸°")
        time.sleep(delay)
        
        # í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ í™œì„±í™”
        self.use_headless = True
        
        # ì°½ í¬ì»¤ìŠ¤ ìµœì†Œí™” ëª¨ë“œ í™œì„±í™”
        self.minimize_focus = True
```

## 4. êµ¬í˜„ ìš°ì„ ìˆœìœ„

### ğŸ”¥ ì¦‰ì‹œ ì ìš© (ë†’ì€ íš¨ê³¼)
1. **ì°½ í¬ì»¤ìŠ¤ ìµœì†Œí™”**: `_minimize_browser_focus()` ë©”ì„œë“œ ì¶”ê°€
2. **Alert ì²˜ë¦¬ ê°œì„ **: ë¹„ì¹¨ìŠµì  Alert ì²˜ë¦¬ ë°©ì‹ ì ìš©
3. **ì°½ ìƒíƒœ ëª¨ë‹ˆí„°ë§**: ì˜ˆìƒì¹˜ ëª»í•œ ì°½ ë³€í™” ê°ì§€ ë° ë³µêµ¬

### âš ï¸ ë‹¨ê³„ì  ì ìš© (ì¤‘ê°„ íš¨ê³¼)
4. **ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ê°ì§€**: psutil ê¸°ë°˜ ì¸ìŠ¤í„´ìŠ¤ ê°ì§€ ì‹œìŠ¤í…œ
5. **í—¤ë“œë¦¬ìŠ¤ ëª¨ë“œ ì˜µì…˜**: ë‹¤ì¤‘ ë°°ì¹˜ ì‹œ ìë™ í—¤ë“œë¦¬ìŠ¤ ì „í™˜
6. **ì°½ ê²©ë¦¬ ê°•í™”**: ì¸ìŠ¤í„´ìŠ¤ë³„ ë…ë¦½ì  ì‚¬ìš©ì ë°ì´í„° ë””ë ‰í† ë¦¬

### ğŸ“‹ ì¥ê¸° ê°œì„  (ë‚®ì€ ìš°ì„ ìˆœìœ„)
7. **ì‹¤í–‰ ì¡°ì • ì‹œìŠ¤í…œ**: ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ ê°„ ì‹¤í–‰ ì‹œê°„ ì¡°ì •
8. **ë¦¬ì†ŒìŠ¤ ëª¨ë‹ˆí„°ë§**: ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ì‹¤í–‰ ì œì–´

## 5. í…ŒìŠ¤íŠ¸ ë°©ì•ˆ

### 5.1 ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ í…ŒìŠ¤íŠ¸
- ê¸°ë³¸ ì—°ë™í•´ì œ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸
- ì°½ í¬ì»¤ìŠ¤ ë³€ê²½ ìµœì†Œí™” í™•ì¸
- í”„ë¡¬í”„íŠ¸ ìˆ¨ê¹€ í˜„ìƒ ê°œì„  í™•ì¸

### 5.2 ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ í…ŒìŠ¤íŠ¸
- 2ê°œ ì¸ìŠ¤í„´ìŠ¤ ë™ì‹œ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
- 3ê°œ ì´ìƒ ì¸ìŠ¤í„´ìŠ¤ ë™ì‹œ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
- ì„œë¡œ ë‹¤ë¥¸ ê³„ì •ìœ¼ë¡œ ë™ì‹œ ì‹¤í–‰ í…ŒìŠ¤íŠ¸

### 5.3 ê°„ì„­ í…ŒìŠ¤íŠ¸
- í•œ ì¸ìŠ¤í„´ìŠ¤ ì‹¤í–‰ ì¤‘ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘
- ë¸Œë¼ìš°ì € ì°½ í¬ì»¤ìŠ¤ ê²½ìŸ ìƒí™© í…ŒìŠ¤íŠ¸
- Alert ì²˜ë¦¬ ì¤‘ ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤ ë™ì‘ í…ŒìŠ¤íŠ¸

## 6. ì˜ˆìƒ íš¨ê³¼

### âœ… ê°œì„  íš¨ê³¼
- **ë‹¤ì¤‘ ë°°ì¹˜ ì•ˆì •ì„±**: ë¸Œë¼ìš°ì € ê°„ ê°„ì„­ ìµœì†Œí™”
- **ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ**: í”„ë¡¬í”„íŠ¸ ìˆ¨ê¹€ í˜„ìƒ ë°©ì§€
- **ì‹œìŠ¤í…œ ì•ˆì •ì„±**: ì˜ˆìƒì¹˜ ëª»í•œ ì°½ ë³€í™” ëŒ€ì‘
- **í™•ì¥ì„±**: ë™ì‹œ ì‹¤í–‰ ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ ì œí•œ ì™„í™”

### ğŸ“Š ì„±ëŠ¥ ì˜í–¥
- **ì†ë„**: ë¯¸ë¯¸í•œ ì˜í–¥ (ëª¨ë‹ˆí„°ë§ ì˜¤ë²„í—¤ë“œ ìµœì†Œ)
- **ë©”ëª¨ë¦¬**: ì•½ê°„ ì¦ê°€ (ì¸ìŠ¤í„´ìŠ¤ë³„ ê²©ë¦¬ë¡œ ì¸í•œ)
- **ì•ˆì •ì„±**: í¬ê²Œ í–¥ìƒ

---

**ì‘ì„±ì¼**: 2025ë…„ 1ì›” 17ì¼
**ë²„ì „**: 1.0