# ë°°ì¹˜ë¶„í•  ì¤‘ë‹¨ ê¸°ëŠ¥ êµ¬í˜„ ê°€ì´ë“œ

## ê°œìš”

ì´ ë¬¸ì„œëŠ” 1ë‹¨ê³„ ì‘ì—…ì—ì„œ ë¹„ê·¸ë£¹ìƒí’ˆ ì¹´ìš´íŠ¸ê°€ 0ì´ ë˜ì—ˆì„ ë•Œ í›„ì† ë°°ì¹˜ë¶„í• ì„ ìë™ìœ¼ë¡œ ì¤‘ë‹¨í•˜ëŠ” ê¸°ëŠ¥ì˜ êµ¬í˜„ ë‚´ìš©ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ë¬¸ì œ ìƒí™©

ê¸°ì¡´ì—ëŠ” ëŒ€ëŸ‰ì˜ ìƒí’ˆ(ì˜ˆ: 100ê°œ)ì„ ì‘ì€ ë°°ì¹˜(ì˜ˆ: 20ê°œì”© 5ë²ˆ)ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•  ë•Œ, ì¤‘ê°„ì— ë¹„ê·¸ë£¹ìƒí’ˆì´ ëª¨ë‘ ì†Œì§„ë˜ì–´ë„ ë‚¨ì€ ë°°ì¹˜ë¶„í• ì´ ê³„ì† ì‹¤í–‰ë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

**ì˜ˆì‹œ:**
- ì´ 100ê°œ ìƒí’ˆì„ 20ê°œì”© 5ë²ˆ ë°°ì¹˜ë¶„í• ë¡œ ì²˜ë¦¬
- 3ë²ˆì§¸ ë°°ì¹˜ í›„ ë¹„ê·¸ë£¹ìƒí’ˆì´ 0ê°œê°€ ë¨
- ê¸°ì¡´: 4ë²ˆì§¸, 5ë²ˆì§¸ ë°°ì¹˜ë„ ê³„ì† ì‹¤í–‰ (ë¶ˆí•„ìš”í•œ ì‘ì—…)
- ê°œì„ : 3ë²ˆì§¸ ë°°ì¹˜ í›„ ìë™ ì¤‘ë‹¨

## êµ¬í˜„ ë‚´ìš©

### 1. Step1Core ìˆ˜ì • (`core/steps/step1_core.py`)

#### 1.1 ê²°ê³¼ êµ¬ì¡°ì²´ì— ì¤‘ë‹¨ í”Œë˜ê·¸ ì¶”ê°€

```python
result = {
    'success': False,
    'processed': 0,
    'failed': 0,
    'errors': [],
    'product_count_before': 0,
    'product_count_after': 0,
    'should_stop_batch': False  # ë°°ì¹˜ë¶„í•  ì¤‘ë‹¨ í”Œë˜ê·¸
}
```

#### 1.2 ì‹¤í–‰ ì „ ë¹„ê·¸ë£¹ìƒí’ˆ í™•ì¸

```python
if available_products == 0:
    logger.error("ë¹„ê·¸ë£¹ìƒí’ˆ ëª©ë¡ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.")
    result['errors'].append("ë¹„ê·¸ë£¹ìƒí’ˆ ëª©ë¡ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.")
    result['should_stop_batch'] = True  # ë°°ì¹˜ë¶„í•  ì¤‘ë‹¨ í”Œë˜ê·¸ ì„¤ì •
    return result
```

#### 1.3 ì‹¤í–‰ í›„ ë¹„ê·¸ë£¹ìƒí’ˆ í™•ì¸

```python
final_products = self._check_product_count()
result['product_count_after'] = final_products
logger.info(f"ğŸ“Š ì‹¤í–‰ í›„ ë¹„ê·¸ë£¹ìƒí’ˆ ìˆ˜ëŸ‰: {final_products}ê°œ")

# ë¹„ê·¸ë£¹ìƒí’ˆì´ 0ê°œê°€ ë˜ë©´ ë°°ì¹˜ë¶„í•  ì¤‘ë‹¨ í”Œë˜ê·¸ ì„¤ì •
if final_products == 0:
    result['should_stop_batch'] = True
    logger.warning("âš ï¸ ë¹„ê·¸ë£¹ìƒí’ˆì´ 0ê°œê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. í›„ì† ë°°ì¹˜ë¶„í• ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.")
```

### 2. BatchManager ìˆ˜ì • (`batch/batch_manager.py`)

#### 2.1 ë°°ì¹˜ë¶„í•  ì¤‘ë‹¨ ë¡œì§ ì¶”ê°€

```python
chunk_result = step_core.execute_step1(current_chunk_size)

# ê²°ê³¼ ëˆ„ì 
total_result['processed'] += chunk_result['processed']
total_result['failed'] += chunk_result['failed']
total_result['errors'].extend(chunk_result['errors'])
total_result['chunks_completed'] += 1

account_logger.info(f"ì²­í¬ {chunk_idx + 1} ì™„ë£Œ: ì²˜ë¦¬ {chunk_result['processed']}ê°œ, ì‹¤íŒ¨ {chunk_result['failed']}ê°œ")

# ë°°ì¹˜ë¶„í•  ì¤‘ë‹¨ í”Œë˜ê·¸ í™•ì¸
if chunk_result.get('should_stop_batch', False):
    account_logger.warning(f"âš ï¸ ì²­í¬ {chunk_idx + 1}ì—ì„œ ë¹„ê·¸ë£¹ìƒí’ˆì´ 0ê°œê°€ ë˜ì–´ í›„ì† ë°°ì¹˜ë¶„í• ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.")
    account_logger.info(f"ì´ {chunk_idx + 1}/{total_chunks} ì²­í¬ ì™„ë£Œ í›„ ì¤‘ë‹¨")
    # í˜„ì¬ ë¸Œë¼ìš°ì € ì¢…ë£Œ í›„ ë£¨í”„ íƒˆì¶œ
    self.browser_manager.close_browser(current_browser_id)
    break
```

#### 2.2 ë¸Œë¼ìš°ì € ì¬ì‹œì‘ ë¡œì§ ê°œì„ 

```python
# ë§ˆì§€ë§‰ ì²­í¬ê°€ ì•„ë‹ˆë©´ ë¸Œë¼ìš°ì € ì¬ì‹œì‘
if chunk_idx < total_chunks - 1:
    # ë¸Œë¼ìš°ì € ì¬ì‹œì‘ ë¡œì§
    # ...
else:
    # ë§ˆì§€ë§‰ ì²­í¬ì¸ ê²½ìš° ë¸Œë¼ìš°ì € ì¢…ë£Œ
    self.browser_manager.close_browser(current_browser_id)
```

## ì‘ë™ ë°©ì‹

### 1. ì‹¤í–‰ íë¦„

1. **ë°°ì¹˜ë¶„í•  ì‹œì‘**: ì´ ìˆ˜ëŸ‰ì„ ì²­í¬ í¬ê¸°ë¡œ ë‚˜ëˆ„ì–´ ë°°ì¹˜ë¶„í•  ê³„íš ìˆ˜ë¦½
2. **ê° ì²­í¬ ì‹¤í–‰**: Step1Core.execute_step1() í˜¸ì¶œ
3. **ë¹„ê·¸ë£¹ìƒí’ˆ í™•ì¸**: ì‹¤í–‰ ì „/í›„ ë¹„ê·¸ë£¹ìƒí’ˆ ì¹´ìš´íŠ¸ ì²´í¬
4. **ì¤‘ë‹¨ í”Œë˜ê·¸ í™•ì¸**: should_stop_batch í”Œë˜ê·¸ í™•ì¸
5. **ì¡°ê±´ë¶€ ì¤‘ë‹¨**: í”Œë˜ê·¸ê°€ Trueì´ë©´ í›„ì† ë°°ì¹˜ë¶„í•  ì¤‘ë‹¨

### 2. ì¤‘ë‹¨ ì¡°ê±´

- **ì‹¤í–‰ ì „**: ë¹„ê·¸ë£¹ìƒí’ˆì´ 0ê°œì¸ ê²½ìš°
- **ì‹¤í–‰ í›„**: ë¹„ê·¸ë£¹ìƒí’ˆì´ 0ê°œê°€ ëœ ê²½ìš°

### 3. ë¡œê·¸ ë©”ì‹œì§€

```
âš ï¸ ë¹„ê·¸ë£¹ìƒí’ˆì´ 0ê°œê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. í›„ì† ë°°ì¹˜ë¶„í• ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.
âš ï¸ ì²­í¬ 3ì—ì„œ ë¹„ê·¸ë£¹ìƒí’ˆì´ 0ê°œê°€ ë˜ì–´ í›„ì† ë°°ì¹˜ë¶„í• ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.
ì´ 3/5 ì²­í¬ ì™„ë£Œ í›„ ì¤‘ë‹¨
```

## GUI ì ìš©

GUIì—ì„œëŠ” CLIë¥¼ í†µí•´ ë°°ì¹˜ ì‘ì—…ì„ ì‹¤í–‰í•˜ë¯€ë¡œ, ë³„ë„ì˜ ìˆ˜ì • ì—†ì´ ìë™ìœ¼ë¡œ ì´ ê¸°ëŠ¥ì´ ì ìš©ë©ë‹ˆë‹¤.

### GUI ì‚¬ìš© ì‹œ ë™ì‘

1. GUIì—ì„œ ë‹¤ì¤‘ ë°°ì¹˜ ì‹¤í–‰
2. ê° ê³„ì •-ë‹¨ê³„ ì¡°í•©ë§ˆë‹¤ ë³„ë„ì˜ CLI í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
3. CLIì—ì„œ BatchManager í˜¸ì¶œ
4. BatchManagerì—ì„œ ë°°ì¹˜ë¶„í•  ì¤‘ë‹¨ ë¡œì§ ì ìš©
5. ì¤‘ë‹¨ ì‹œ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë§Œ ì¢…ë£Œ, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ëŠ” ê³„ì† ì‹¤í–‰

## í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ìˆ˜ë™ í…ŒìŠ¤íŠ¸

```bash
# CLIë¥¼ í†µí•œ í…ŒìŠ¤íŠ¸
python cli/batch_cli.py single --step 1 --accounts account_1 --quantity 100
```

### 2. ìë™ í…ŒìŠ¤íŠ¸

```bash
# í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
python test_batch_stop.py
```

## ì£¼ì˜ì‚¬í•­

### 1. 1ë‹¨ê³„ ì „ìš© ê¸°ëŠ¥

- ì´ ê¸°ëŠ¥ì€ 1ë‹¨ê³„(ìƒí’ˆ ìˆ˜ì •)ì—ì„œë§Œ ì ìš©ë©ë‹ˆë‹¤.
- ë‹¤ë¥¸ ë‹¨ê³„(2-6ë‹¨ê³„)ì—ì„œëŠ” ë¹„ê·¸ë£¹ìƒí’ˆë³´ê¸° í™”ë©´ì„ ì—´ì–´ë³´ëŠ” ê³¼ì •ì´ ì—†ìœ¼ë¯€ë¡œ í•´ë‹¹ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### 2. ë…ë¦½ì ì¸ ë°°ì¹˜ë¶„í• 

- ê° ê³„ì •-ë‹¨ê³„ ì¡°í•©ì€ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
- í•œ ê³„ì •ì—ì„œ ë°°ì¹˜ë¶„í• ì´ ì¤‘ë‹¨ë˜ì–´ë„ ë‹¤ë¥¸ ê³„ì •ì˜ ì‘ì—…ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.

### 3. ë¸Œë¼ìš°ì € ê´€ë¦¬

- ë°°ì¹˜ë¶„í•  ì¤‘ë‹¨ ì‹œ í˜„ì¬ ë¸Œë¼ìš°ì €ëŠ” ìë™ìœ¼ë¡œ ì¢…ë£Œë©ë‹ˆë‹¤.
- ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì ì ˆí•œ ë¦¬ì†ŒìŠ¤ ì •ë¦¬ê°€ ìˆ˜í–‰ë©ë‹ˆë‹¤.

## í–¥í›„ ê°œë°œ ê³ ë ¤ì‚¬í•­

### 1. Steps 2-6 ê°œë°œ ì‹œ

- ê° ë‹¨ê³„ë³„ë¡œ `stepX_core.py` íŒŒì¼ êµ¬ì¡° ìœ ì§€
- `product_editor_core.py`ì™€ ë™ì¼í•œ íŒ¨í„´ìœ¼ë¡œ ê°œë°œ
- ë¹„ê·¸ë£¹ìƒí’ˆ ì¹´ìš´íŠ¸ ë¡œì§ì€ 1ë‹¨ê³„ì—ì„œë§Œ í•„ìš”

### 2. ì•„í‚¤í…ì²˜ ì¼ê´€ì„±

- SOLID ì›ì¹™ ì¤€ìˆ˜
- Clean Architecture ì ìš©
- TDD ë°©ì‹ìœ¼ë¡œ ê°œë°œ

### 3. GUI ìš°ì„  ê°œë°œ

- GUIê°€ CLIì— ì¢…ì†ë˜ì§€ ì•Šë„ë¡ ì„¤ê³„
- GUI í™˜ê²½ì—ì„œì˜ ì‚¬ìš©ì„± ìš°ì„  ê³ ë ¤
- CLIëŠ” ë³´ì™„ì  ì—­í• ë¡œ ìœ ì§€

## ê²°ë¡ 

ì´ë²ˆ êµ¬í˜„ìœ¼ë¡œ ë°°ì¹˜ë¶„í•  ì‘ì—…ì˜ íš¨ìœ¨ì„±ì´ í¬ê²Œ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¹„ê·¸ë£¹ìƒí’ˆì´ ì†Œì§„ëœ í›„ ë¶ˆí•„ìš”í•œ ë°°ì¹˜ë¶„í• ì´ ì‹¤í–‰ë˜ì§€ ì•Šì•„ ì‹œê°„ê³¼ ë¦¬ì†ŒìŠ¤ë¥¼ ì ˆì•½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ëª…í™•í•œ ë¡œê·¸ ë©”ì‹œì§€ë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ì‘ì—… ìƒí™©ì„ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.